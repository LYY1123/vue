/*! leadBank版权所有,请勿转载 */
webpackJsonp([5],{202:function(t,e,a){"use strict";function s(t){a(255)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(256),o=a.n(n),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"buyFundAffirm",attrs:{id:"buyFundAffirm"}},[a("div",{staticClass:"buyFundT"},[a("p",{staticClass:"fc-19191E title"},[t._v(t._s(t.prdInfoBean))]),t._v(" "),a("p",{staticClass:"fc-96969B code"},[a("span",[t._v(t._s(t.prdCode))]),t._v(" "),a("span",[t._v(t._s(t.prdTypeName))])])]),t._v(" "),a("spaceWrapper"),t._v(" "),a("div",{staticClass:"buyFundC"},[a("div",{staticClass:"info"},[a("div",{staticClass:"infoL fc-9b9b9b"},[t._v("银行卡")]),t._v(" "),a("div",{staticClass:"infoR fc-19191E"},[a("span",[a("img",{staticClass:"bankIcon",attrs:{src:t.bankIco}})]),t._v("\n        "+t._s(t.bankName)+"(尾号"+t._s(t.tailNum)+")\n      ")])]),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"infoL fc-9b9b9b"},[t._v("购买金额")]),t._v(" "),a("div",{staticClass:"infoR fc-19191E"},[t._v(t._s(t.inputMoney)+"元")])]),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"infoL fc-9b9b9b"},[t._v("金额大写")]),t._v(" "),a("div",{staticClass:"infoR fc-19191E"},[t._v(t._s(t.bigNum))])]),t._v(" "),1==t.flag&&""!=t.redPacketDel.equityAmount?a("div",{staticClass:"redPacketInfo fc-96969B",on:{click:t.showBankList}},[a("div",{staticClass:"infoL fc-19191E"},[t._v("红包抵扣")]),t._v(" "),a("div",{staticClass:"infoR fc-dc2828"},[t._v(t._s(t.redPacketDel.equityAmount||"0.00")+"元"),a("em",{staticClass:"downIcon"})])]):t._e()]),t._v(" "),a("spaceWrapper"),t._v(" "),a("div",{staticClass:"buyFundB"},[1==t.flag&&""!=t.redPacketDel.equityAmount?a("div",{staticClass:"redPacketMon"},[a("p",{staticClass:"redPacketMonL fc-96969B",on:{click:t.redPacketMon}},[t._v("实付金额 "),a("em",{staticClass:"icon"})]),t._v(" "),a("p",{staticClass:"redPacketMonR fc-dc2828"},[t._v(t._s(t.realPayMoney)+"元")])]):t._e(),t._v(" "),a("BaseButton",{attrs:{styleObj:t.styleObj,disabled:t.disabled},nativeOn:{click:function(e){t.payFund(e)}}},[t._v("\n      立即支付\n    ")])],1),t._v(" "),a("EnterPwd",{attrs:{enterPwd:t.enterPwd},on:{confirm:function(e){t.purchaseFund()},input:t.changeColor},model:{value:t.tradepwd,callback:function(e){t.tradepwd=e},expression:"tradepwd"}}),t._v(" "),t.equityNo&&t.redPacketList.lists.length>0?a("redPacketList",{ref:"redPacketList",attrs:{equityNo:t.equityNo,redPacketList:t.redPacketList},on:{addList:t.queryWorkEquityFlagList}}):t._e(),t._v(" "),a("model",[a("div",{attrs:{slot:"body"},slot:"body"},[a("div",{staticClass:"modal-body modal-body2"},[a("p",{staticClass:"notice",domProps:{innerHTML:t._s(t.modal.modelText)}})])]),t._v(" "),a("div",{attrs:{slot:"button"},slot:"button"},[a("div",{staticClass:"modal-footer"},[""!=t.modal.btnLeft?a("div",{staticClass:" button buttonLeft",domProps:{innerHTML:t._s(t.modal.btnLeft)},on:{click:function(e){t.incident(t.modal.btnLeft)}}}):t._e(),t._v(" "),""!=t.modal.btnRight?a("div",{staticClass:"button btn-active",on:{click:function(e){t.incident(t.modal.btnRight)}}},[t._v("\n          "+t._s(t.modal.btnRight)+"\n        ")]):t._e()])])])],1)},r=[],d={render:i,staticRenderFns:r},c=d,u=a(1),l=s,p=u(o.a,c,!1,l,"data-v-6916b768",null);e.default=p.exports},222:function(t,e,a){"use strict";function s(t){a(223)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(224),o=a.n(n),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.modal.modalShow,expression:"modal.modalShow"}],staticClass:"modal",attrs:{transition:"fade"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[""!=t.modal.title?a("div",{staticClass:"modal-header"},[t._t("header",[a("p",{staticClass:"title"},[t._v(t._s(t.modal.title))])])],2):t._e(),t._v(" "),""==t.modal.title?a("div",{staticClass:"space"}):t._e(),t._v(" "),t._t("body"),t._v(" "),t._t("button")],2)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.modal.modalShow,expression:"modal.modalShow"}],staticClass:"modal-backup",attrs:{transition:"fade"}})])},r=[],d={render:i,staticRenderFns:r},c=d,u=a(1),l=s,p=u(o.a,c,!1,l,"data-v-29492275",null);e.default=p.exports},223:function(t,e){},224:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{modalOptions:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{modal:function(){return this.$store.getters.modal}},methods:{}}},255:function(t,e){},256:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(9),o=s(n),i=a(4),r=s(i),d=a(257),c=s(d),u=a(260),l=s(u),p=a(222),m=s(p),f=a(3),v=a(2);e.default={name:"BuyFundAffirm",components:{spaceWrapper:o.default,BaseButton:r.default,EnterPwd:c.default,redPacketList:l.default,model:m.default},data:function(){return{flag:0,bigNum:"",styleObj:{color:"#FFF",background:"#DC2828"},disabled:!1,redPacketList:{noContent:1,lists:[]},prdInfoBean:"",prdCode:"",prdTypeName:"",bankIco:"",bankName:"",tailNum:"",inputMoney:"",reqTime:"",redPacketNum:"",tradepwd:"",num:0,time:2e3,interval:"",enterPwd:{},pageIndex:0,redPacketSize:0,equityNo:""}},computed:{redPacketDel:function(){return this.$store.getters.redPacketDetail},buyMon:function(){return this.$store.getters.buyMon},modal:function(){return this.$store.getters.modal},realPayMoney:function(){var t=String((0,f.subFloat)(this.inputMoney,this.redPacketDel.equityAmount));return t.indexOf(".")>-1&&t.substr(t.indexOf(".")+1).length>2?t.substr(0,t.indexOf("."))+t.substr(t.indexOf("."),3):(0,f.subFloat)(this.inputMoney,this.redPacketDel.equityAmount)}},mounted:function(){this.affirmDetail()},methods:{redPacketMon:function(){this.$store.commit("UPDATE_ROOTSTATE",{stateName:"modal",data:{modalShow:!0,modelText:"实付金额 = 投资金额 - 红包抵扣",btnLeft:"",btnRight:"确定"}})},changeColor:function(){this.tradepwd.length>=6&&this.tradepwd.length<=20?this.enterPwd.flag=1:this.enterPwd.flag=0},redPacket:function(){var t=this,e=new Date;t.reqTime=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),(0,v.queryBuyEquityCount)({productId:t.$router.currentRoute.query.fundId||sessionStorage.getItem("FUNDID"),reqTime:t.reqTime}).then(function(e){"000"==e.data.respCode?"1"==e.data.data.flag&&(t.flag=1):(0,f.toast)(e.data.respMessage)})},queryEquityMax:function(){var t=this;(0,v.queryEquityMax)({productId:t.$router.currentRoute.query.fundId||sessionStorage.getItem("FUNDID"),productType:t.$router.currentRoute.query.fundType||sessionStorage.getItem("prdType"),buyAmount:sessionStorage.getItem("inputMoney"),productCategory:3}).then(function(e){"000"==e.data.respCode&&(t.redPacketNum=e.data.data.equityAmount,t.equityNo=e.data.data.equityNo,t.$store.commit("UPDATE_BUYSTATE",{stateName:"redPacketDetail",data:{equityAmount:t.redPacketNum,equityNo:t.equityNo}}))})},queryWorkEquityFlagList:function(){var t=this;if(!(0==t.pageIndex||t.pageIndex<t.redPacketSize))return void(t.redPacketList.noContent=0);t.pageIndex=t.pageIndex+1,(0,v.queryWorkEquityFlagList)({productId:t.$router.currentRoute.query.fundId||sessionStorage.getItem("FUNDID"),productType:t.$router.currentRoute.query.fundType||sessionStorage.getItem("prdType"),buyAmount:sessionStorage.getItem("inputMoney"),productCategory:"3",pageIndex:t.pageIndex,pageCount:"10"}).then(function(e){"000"==e.data.respCode?(t.redPacketSize=e.data.data.size,t.redPacketList.lists=t.redPacketList.lists.concat(e.data.data.useableList),t.$nextTick(function(){t.$refs.redPacketList.handleParentClick()})):(0,f.toast)(e.data.respMessage)})},affirmDetail:function(){var t=this;t.prdInfoBean=sessionStorage.getItem("prdInfoBean"),t.prdCode=sessionStorage.getItem("prdCode"),t.prdTypeName=sessionStorage.getItem("prdTypeName"),t.bankIco=sessionStorage.getItem("bankIco"),t.bankName=sessionStorage.getItem("bankName"),t.tailNum=sessionStorage.getItem("tailNum"),t.inputMoney=sessionStorage.getItem("inputMoney"),t.redPacket(),t.bigNumText(),t.queryEquityMax()},payFund:function(){this.$store.commit("UPDATE_SHOWENTERPWD",!0)},showBankList:function(){var t=this;t.pageIndex=0,t.redPacketList.lists=[],t.queryWorkEquityFlagList()},incident:function(t){var e=this;"重新输入"==t?(e.$store.commit("UPDATE_ROOTSTATE",{stateName:"modal",data:{modalShow:!1,modelText:"",btnLeft:"",btnRight:""}}),e.$store.commit("UPDATE_SHOWENTERPWD",!0)):"知道了"==t?e.$store.commit("UPDATE_ROOTSTATE",{stateName:"modal",data:{title:"",modalShow:!1}}):"联系客服"==t||"确定"==t&&e.$store.commit("UPDATE_ROOTSTATE",{stateName:"modal",data:{title:"",modalShow:!1}}),e.closeLoad()},bigNumText:function(){this.bigNum=(0,f.convertCurrency)(sessionStorage.getItem("inputMoney"))},purchaseFund:function(){var t=this;t.tradepwd.length<6||t.tradepwd.length>20||(t.$store.commit("UPDATE_SHOWENTERPWD",!1),(0,v.purchaseFund)({fundcode:sessionStorage.getItem("prdCode"),fundName:encodeURI(sessionStorage.getItem("prdInfoBean")),balance:sessionStorage.getItem("inputMoney"),tradepwd:t.tradepwd,fundType:sessionStorage.getItem("prdType"),bankCardNo:sessionStorage.getItem("bankCardNo"),bankId:sessionStorage.getItem("bankId"),vouchersId:t.$store.getters.redPacketDetail.equityNo,deduceCash:t.$store.getters.redPacketDetail.equityAmount}).then(function(e){"000"==e.data.respCode?(t.$store.commit("UPDATE_LOADINGFLAG",3),"2"==e.data.data.txnStatus?t.interval=setInterval(function(){t.num++,t.qryFundOrd(e.data.data.orderId),t.num>3&&t.num<5?t.time=3e3:t.num>5&&(clearInterval(t.interval),sessionStorage.setItem("orderId",e.data.data.orderId),t.closeLoad(),t.$router.push({path:"/tradingDetail"}))},t.time):(sessionStorage.setItem("orderId",e.data.data.orderId),t.closeLoad(),t.$router.push({path:"/tradingDetail"}))):"999"==e.data.respCode&&("122025"==e.data.subSysRepCode?t.$store.commit("UPDATE_ROOTSTATE",{stateName:"modal",data:{title:"",modalShow:!0,modelText:e.data.respMessage,btnLeft:'<a href="tel:4009217755">联系客服</a>',btnRight:"知道了"}}):"122044"==e.data.subSysRepCode?t.$store.commit("UPDATE_ROOTSTATE",{stateName:"modal",data:{modalShow:!0,modelText:e.data.respMessage,btnLeft:"",btnRight:"重新输入"}}):"122014"==e.data.subSysRepCode?t.$store.commit("UPDATE_ROOTSTATE",{stateName:"modal",data:{modalShow:!0,modelText:e.data.respMessage,btnLeft:"",btnRight:"知道了"}}):((0,f.toast)(e.data.respMessage),t.closeLoad()))}))},qryFundOrd:function(t){var e=this;e.$store.commit("UPDATE_LOADINGFLAG",3),(0,v.qryFundOrd)({orderId:t}).then(function(t){"000"==t.data.respCode?"2"!=t.data.data.txnStatus&&(clearInterval(e.interval),sessionStorage.setItem("orderId",t.data.data.orderId),e.closeLoad(),e.$router.push({path:"/tradingDetail"})):(clearInterval(e.interval),e.closeLoad(),(0,f.toast)(t.data.respMessage))})},closeLoad:function(){this.$store.commit("UPDATE_LOADINGFLAG",0)}}}},257:function(t,e,a){"use strict";function s(t){a(258)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(259),o=a.n(n),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"enterPwd bg-ffffff"},[a("div",{staticClass:"content"},[a("div",{staticClass:"enterPwdTop"},[a("span",{staticClass:"cancel fc-19191E fs-30",on:{click:t.close}},[t._v("\n          取消\n        ")]),t._v(" "),a("span",{staticClass:"title fc-19191E fs-36"},[t._v("输入交易密码")]),t._v(" "),a("span",{staticClass:"confirm fc-dcdcdc fs-30",class:{"fc-19191E":1==t.enterPwd.flag},on:{click:t.confirm}},[t._v("\n          确定\n        ")])]),t._v(" "),a("div",{staticClass:"enterPwdCenter"},["checkbox"===t.mytype?a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwdInput,expression:"pwdInput"}],staticClass:"pwdInput fs-36 fc-19191E",attrs:{maxlength:"20",type:"checkbox"},domProps:{checked:Array.isArray(t.pwdInput)?t._i(t.pwdInput,null)>-1:t.pwdInput},on:{input:function(e){t.$emit("input",e.target.value)},change:function(e){var a=t.pwdInput,s=e.target,n=!!s.checked;if(Array.isArray(a)){var o=t._i(a,null);s.checked?o<0&&(t.pwdInput=a.concat([null])):o>-1&&(t.pwdInput=a.slice(0,o).concat(a.slice(o+1)))}else t.pwdInput=n}}}):"radio"===t.mytype?a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwdInput,expression:"pwdInput"}],staticClass:"pwdInput fs-36 fc-19191E",attrs:{maxlength:"20",type:"radio"},domProps:{checked:t._q(t.pwdInput,null)},on:{input:function(e){t.$emit("input",e.target.value)},change:function(e){t.pwdInput=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwdInput,expression:"pwdInput"}],staticClass:"pwdInput fs-36 fc-19191E",attrs:{maxlength:"20",type:t.mytype},domProps:{value:t.pwdInput},on:{input:[function(e){e.target.composing||(t.pwdInput=e.target.value)},function(e){t.$emit("input",e.target.value)}]}}),t._v(" "),a("div",{staticClass:"iconWrapper",on:{click:t.toggleIcon}},[a("em",{staticClass:"icon",class:{iconClose:0==t.open,iconOpen:0!=t.open}})])]),t._v(" "),a("div",{staticClass:"enterPwdbottom"})])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"enterPwdWrapper"})])},r=[],d={render:i,staticRenderFns:r},c=d,u=a(1),l=s,p=u(o.a,c,!1,l,"data-v-a15a276e",null);e.default=p.exports},258:function(t,e){},259:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{enterPwd:{type:Object,default:function(){return{}}}},data:function(){return{tag:1,open:!1,flag:0,pwdInput:""}},computed:{show:function(){return this.$store.getters.showEnterPwd},mytype:function(){return this.open?"":"password"}},methods:{toggleIcon:function(){this.open=!this.open},close:function(){this.pwdInput="",this.$emit("input",""),this.enterPwd.flag=0,this.$store.commit("UPDATE_SHOWENTERPWD",!1)},confirm:function(){var t=this;t.$emit("confirm"),t.pwdInput="",t.$emit("input",""),t.enterPwd.flag=0}}}},260:function(t,e,a){"use strict";function s(t){a(261)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(262),o=a.n(n),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"redPacketList"},[a("div",{staticClass:"content"},[a("div",{staticClass:"contentTop bg-f0f0f0"},[a("span",{staticClass:"cancel fc-19191E fs-30",on:{click:t.close}},[t._v("取消")]),t._v(" "),a("span",{staticClass:"title fc-19191E fs-36"},[t._v("选择红包")]),t._v(" "),a("span",{staticClass:"confirm fc-19191E fs-30",on:{click:t.noPacket}},[t._v("不使用")])]),t._v(" "),a("div",{staticClass:"contentBottom bg-ffffff"},[a("ul",{directives:[{name:"show",rawName:"v-show",value:""!=t.redPacketList.lists,expression:" redPacketList.lists != '' "}],staticClass:"listWrapper"},[a("scroll",{attrs:{data:t.redPacketList.lists,loadMoreDataFlag:t.redPacketList.noContent},on:{pullingUp:t.addList}},t._l(t.redPacketList.lists,function(e,s){return a("li",{key:s,staticClass:"list",on:{click:function(a){t.select(s,e.equityNo,e.flag,e.hint)}}},[a("div",{staticClass:"listL"},[a("em",{staticClass:"redPacketIcon"},[a("span",{staticClass:"numText"},[t._v(t._s(e.equityAmount))])]),t._v(" "),a("p",{staticClass:"time fc-3c3c00"},[t._v(t._s(e.days)),a("span",{staticClass:"timeText"},[t._v("天后过期")])])]),t._v(" "),a("div",{staticClass:"listR"},[a("div",{staticClass:"content"},[a("p",{staticClass:"top fs-30 fc-19191E"},[t._v(t._s(e.equityName))]),t._v(" "),a("ul",[a("li",{staticClass:"bottomList bottom fs-24 fc-96969B"},[t._v(t._s(e.rules_1))]),t._v(" "),a("li",{staticClass:"bottomList fs-24 fc-96969B"},[t._v(t._s(e.rules_2))]),t._v(" "),a("li",{staticClass:"bottomList fs-24 fc-96969B"},[t._v(t._s(e.rules_3))])])])]),t._v(" "),a("em",{class:{checkIcon:t.isActive==e.equityNo}})])}))],1)])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"redPacketListWrapper",on:{touchstart:t.stopEvent,touchmove:t.stopEvent,touchend:t.stopEvent,click:function(e){if(e.target!==e.currentTarget)return null;t.show=!1}}})])},r=[],d={render:i,staticRenderFns:r},c=d,u=a(1),l=s,p=u(o.a,c,!1,l,"data-v-6b1a394e",null);e.default=p.exports},261:function(t,e){},262:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(8),n=function(t){return t&&t.__esModule?t:{default:t}}(s),o=a(3);e.default={components:{scroll:n.default},props:{redPacketList:{type:Object,default:function(){return{}}},equityNo:{type:[String,Number],default:function(){return""}}},data:function(){return{show:!1,isActive:this.equityNo}},methods:{close:function(){this.show=!1},noPacket:function(){this.show=!1,this.isActive="",this.$store.commit("UPDATE_BUYSTATE",{stateName:"redPacketDetail",data:{equityAmount:"0.00",equityNo:""}})},handleParentClick:function(t){this.show=!0},select:function(t,e,a,s){var n=this;if("0"==a)return void(0,o.toast)(s);n.isActive=e,n.$store.commit("UPDATE_BANKCARDDETAIL",n.redPacketList.lists[t]),this.show=!1},addList:function(){this.$emit("addList")},stopEvent:function(t){t.stopPropagation()}}}}});